(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1655089b"],{7340:function(e,t,c){"use strict";c("e3d6")},b789:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o=Object(a["withScopeId"])("data-v-90793cb4");Object(a["pushScopeId"])("data-v-90793cb4");var n=Object(a["createVNode"])("div",{class:"loadingio-spinner-dual-ring-7s087i3q3b3"},[Object(a["createVNode"])("div",{class:"ldio-us6frdv3wm"},[Object(a["createVNode"])("div"),Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div")])])],-1),r=Object(a["createVNode"])("div",{class:"banner bg-cover d-flex justify-content-center align-items-center",style:{"background-image":"url('https://images.unsplash.com/photo-1592805145006-353114433db5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=750&q=80')",height:"400px"}},[Object(a["createVNode"])("div",{class:"banner-text text-white"},[Object(a["createVNode"])("h3",{class:"pt-2"},"購物車")])],-1),s={key:0,class:"container"},i={key:0},l=Object(a["createVNode"])("div",{class:"row"},[Object(a["createVNode"])("div",{class:"col-12"},[Object(a["createVNode"])("h1",null,"沒商品唷")])],-1),d={key:1,class:"d-flex justify-content-between align-items-center"},u=Object(a["createVNode"])("h6",{class:"mb-3 mt-5"},"購物明細",-1),b=Object(a["createVNode"])("i",{class:"fas fa-caret-left"},null,-1),p=Object(a["createTextVNode"])(" 繼續選購 "),j={class:"table-responsive"},O={key:0,class:"table"},m=Object(a["createVNode"])("thead",{class:"bg-primary text-white"},[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",{class:"d-none d-sm-block d-sm-table-cell ps-3",width:"300"},"商品名稱"),Object(a["createVNode"])("th",{class:"text-center",width:"300"},[Object(a["createVNode"])("span",{class:"d-inline d-sm-none ps-3"},"名稱/"),Object(a["createTextVNode"])(" 數量")]),Object(a["createVNode"])("th",{class:"text-center","max-width":"150"},"金額"),Object(a["createVNode"])("th",{class:"text-center text-sm-end pe-4"},"刪除")])],-1),f={class:"d-none d-sm-table-cell ps-3"},h={class:"mb-0 pt-2"},N={class:"mb-0 pt-sm-2 text-danger"},V={class:"ps-sm-5 align-middle d-table-cell"},g={class:"d-sm-none"},y={class:"d-sm-none mb-0 text-danger"},v={class:" input-group mx-auto ps-sm-4"},k=Object(a["createVNode"])("i",{class:"fas fa-minus"},null,-1),x={class:"qty_input border border-2 pt-1 text-center px-3"},C=Object(a["createVNode"])("i",{class:"fas fa-plus"},null,-1),B={class:"text-center align-middle"},_={class:"align-middle text-center text-sm-end pe-3"},w=Object(a["createVNode"])("i",{class:"far fa-trash-alt"},null,-1),T={class:"input-group mb-3"},L={class:"h5 text-end pe-5"},$=Object(a["createTextVNode"])("總計: "),D={key:0,class:"h5 text-end pe-5 text-primary"},S=Object(a["createTextVNode"])("折扣後: "),q={class:"text-primary"},P={key:1,class:"d-flex justify-content-end"},I=Object(a["createTextVNode"])(" 下一步 "),M=Object(a["createVNode"])("i",{class:"fas fa-caret-right"},null,-1);Object(a["popScopeId"])();var F=o((function(e,t,c,F,H,G){var J=Object(a["resolveComponent"])("Loading"),A=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(J,{active:H.isLoading},{default:o((function(){return[n]})),_:1},8,["active"]),r,H.cart.carts?(Object(a["openBlock"])(),Object(a["createBlock"])("div",s,[0===H.cart.carts.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",i,[l])):Object(a["createCommentVNode"])("",!0),0!==H.cart.carts.length?(Object(a["openBlock"])(),Object(a["createBlock"])("div",d,[u,Object(a["createVNode"])(A,{to:"/products",class:"stepLink btn btn-outline-primary rounded-pill mb-2 px-3 mt-4"},{default:o((function(){return[b,p]})),_:1})])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",j,[0!==H.cart.carts.length?(Object(a["openBlock"])(),Object(a["createBlock"])("table",O,[m,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(H.cart.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{class:"pt-1",key:t.id},[Object(a["createVNode"])("td",f,[Object(a["createVNode"])("p",h,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("p",N,Object(a["toDisplayString"])(t.product.program),1),H.finalPrice===H.cart.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("p",{key:0,class:["d-none d-sm-table-cell",{"text-success":H.isTrue}]},"已套用此優惠",2)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",V,[Object(a["createVNode"])("p",g,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("p",y,Object(a["toDisplayString"])(t.product.program),1),H.finalPrice===H.cart.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("p",{key:0,class:["d-sm-none",{"text-success":H.isTrue}]},"已套用此優惠",2)):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])("div",v,[Object(a["createVNode"])("button",{type:"button",disabled:1===t.qty,onClick:function(e){return G.reduce(t)},class:"btn btn-primary btn-sm rounded-0"},[k],8,["disabled","onClick"]),Object(a["createVNode"])("span",x,Object(a["toDisplayString"])(t.qty),1),Object(a["createVNode"])("button",{type:"button",onClick:function(e){return G.addNum(t)},class:"btn btn-outline-primary btn-sm rounded-0"},[C],8,["onClick"])])]),Object(a["createVNode"])("td",B,[Object(a["createVNode"])("p",{class:["pt-2 mb-0",{"text-decoration-line-through":H.isTrue,"text-secondary":H.isTrue}]}," NT "+Object(a["toDisplayString"])(e.$filters.currency(t.total)),3),H.finalPrice===H.cart.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,class:{"text-success":H.isTrue}},"NT "+Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),3)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",_,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return G.deleteCartProduct(t)}},[w],8,["onClick"])])])})),128))])])):Object(a["createCommentVNode"])("",!0)]),0!==H.cart.carts.length?(Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],{key:2},[Object(a["createVNode"])("div",T,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control rounded-0","onUpdate:modelValue":t[1]||(t[1]=function(e){return H.coupon_code=e}),placeholder:"請輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"basic-addon2"},null,512),[[a["vModelText"],H.coupon_code]]),Object(a["createVNode"])("span",{class:["btn btn-outline-primary rounded-0 input-group-text",{disabled:H.finalPrice}],onClick:t[2]||(t[2]=function(){return G.inputCoupon&&G.inputCoupon.apply(G,arguments)})},"套用優惠券",2)]),Object(a["createVNode"])("div",{class:{"text-decoration-line-through":H.isTrue,"text-secondary":H.isTrue,p:H.isTrue}},[Object(a["createVNode"])("p",L,[$,Object(a["createVNode"])("span",null,"NT "+Object(a["toDisplayString"])(e.$filters.currency(H.cart.total))+"元",1)])],2),H.finalPrice===H.cart.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("p",D,[S,Object(a["createVNode"])("span",q,"NT "+Object(a["toDisplayString"])(e.$filters.currency(H.cart.final_total))+"元",1)])):Object(a["createCommentVNode"])("",!0),H.cart.carts?(Object(a["openBlock"])(),Object(a["createBlock"])("div",P,[Object(a["createVNode"])(A,{to:"/order",class:["stepLink btn btn-outline-primary rounded-pill my-2 px-3",{disabled:0===H.cart.carts.length}]},{default:o((function(){return[I,M]})),_:1},8,["class"])])):Object(a["createCommentVNode"])("",!0)],64)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)],64)})),H=(c("99af"),{inject:["emitter"],data:function(){return{cart:[],coupon_code:"",isTrue:!1,finalPrice:"",isLoading:!0}},methods:{getCartList:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart");this.$http.get(t).then((function(t){e.isLoading=!1,e.cart=t.data.data}))},updateCart:function(e,t){var c=this;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart/").concat(e.id),o={product_id:e.product.id,qty:e.qty};this.$http.put(a,{data:o}).then((function(e){e.data.success?(c.getCartList(),c.isLoading=!1,c.$swal({icon:"success",title:"".concat(e.data.message)})):(c.$swal({icon:"error",title:"".concat(e.data.message)}),console.log("res",e))}))},deleteCartProduct:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart/").concat(e.id);this.$http.delete(c).then((function(e){e.data.success?(t.getCartList(),t.isLoading=!1,t.$swal({icon:"success",title:"".concat(e.data.message)}),t.emitter.emit("update-qty")):(console.log(e),t.$swal({icon:"error",title:"".concat(e.data.message)}))})).catch((function(e){t.getCartList(),console.log(e)}))},addNum:function(e){e.product_id===e.product.id&&(e.qty+=1,this.updateCart(e))},reduce:function(e){e.product_id===e.product.id&&(e.qty-=1,this.updateCart(e))},inputCoupon:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/coupon"),c={code:this.coupon_code};this.$http.post(t,{data:c}).then((function(t){t.data.success?(e.getCartList(),e.finalPrice=t.data.data.final_total,e.isTrue=!e.isTrue,e.$swal({icon:"success",title:"".concat(t.data.message)})):e.$swal({icon:"error",title:"請確認輸入的代碼"})})).catch((function(e){void 0===e.data&&console.log(e,"找不到優惠代碼")}))}},mounted:function(){this.getCartList()}});c("7340");H.render=F,H.__scopeId="data-v-90793cb4";t["default"]=H},e3d6:function(e,t,c){}}]);
//# sourceMappingURL=chunk-1655089b.e6c7bdc3.js.map