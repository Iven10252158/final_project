(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64b85af0"],{"1dde":function(t,e,c){var o=c("d039"),n=c("b622"),a=c("2d00"),r=n("species");t.exports=function(t){return a>=51||!o((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"604d":function(t,e,c){"use strict";c("6db8")},"6db8":function(t,e,c){},8418:function(t,e,c){"use strict";var o=c("c04e"),n=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var r=o(e);r in t?n.f(t,r,a(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var o=c("23e7"),n=c("d039"),a=c("e8b5"),r=c("861d"),i=c("7b0b"),s=c("50c4"),d=c("8418"),l=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),f=b("isConcatSpreadable"),h=9007199254740991,j="Maximum allowed index exceeded",O=p>=51||!n((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),m=u("concat"),N=function(t){if(!r(t))return!1;var e=t[f];return void 0!==e?!!e:a(t)},x=!O||!m;o({target:"Array",proto:!0,forced:x},{concat:function(t){var e,c,o,n,a,r=i(this),u=l(r,0),b=0;for(e=-1,o=arguments.length;e<o;e++)if(a=-1===e?r:arguments[e],N(a)){if(n=s(a.length),b+n>h)throw TypeError(j);for(c=0;c<n;c++,b++)c in a&&d(u,b,a[c])}else{if(b>=h)throw TypeError(j);d(u,b++,a)}return u.length=b,u}})},b789:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),n=Object(o["createVNode"])("div",{class:"banner bg-cover d-flex justify-content-center align-items-center",style:{"background-image":"url('https://images.unsplash.com/photo-1592805145006-353114433db5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=750&q=80')",height:"400px"}},[Object(o["createVNode"])("div",{class:"cart-text text-white"},[Object(o["createVNode"])("h3",{class:"pt-2"},"購物車")])],-1),a={class:"container"},r={class:"d-flex justify-content-between align-items-center"},i=Object(o["createVNode"])("h6",{class:"mb-3 mt-5"},"購物明細",-1),s=Object(o["createVNode"])("i",{class:"fas fa-caret-left"},null,-1),d=Object(o["createTextVNode"])(" 繼續選購 "),l={class:"table-responsive"},u={class:"table"},b=Object(o["createVNode"])("thead",{class:"bg-primary text-white"},[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{class:"d-none d-sm-block d-sm-table-cell",width:"300"},"商品名稱"),Object(o["createVNode"])("th",{class:"text-center",width:"300"},[Object(o["createVNode"])("span",{class:"d-inline d-sm-none"},"名稱/"),Object(o["createTextVNode"])(" 數量")]),Object(o["createVNode"])("th",{class:"text-center text-sm-end",width:"150"},"金額"),Object(o["createVNode"])("th",{class:"text-center text-sm-end"},"刪除")])],-1),p={class:"align-middle d-none d-sm-table-cell"},f={class:"ps-sm-5 align-middle d-table-cell"},h={class:"d-sm-none"},j={class:" input-group mx-auto"},O=Object(o["createVNode"])("i",{class:"fas fa-minus"},null,-1),m={class:"qty_input border border-2 pt-1 text-center px-3"},N=Object(o["createVNode"])("i",{class:"fas fa-plus"},null,-1),x={class:"align-middle text-center text-sm-end"},g={class:"align-middle text-center text-sm-end"},V=Object(o["createVNode"])("i",{class:"far fa-trash-alt"},null,-1),v={class:"input-group mb-3"},y={class:"h5 text-end pe-5"},k=Object(o["createTextVNode"])("總計: "),C={key:0,class:"h5 text-end pe-5 text-primary"},w=Object(o["createTextVNode"])("折扣後: "),_={class:"text-primary"};function T(t,e,c,T,B,D){var q=Object(o["resolveComponent"])("NavBar"),S=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(q),n,Object(o["createVNode"])("div",a,[Object(o["createVNode"])("div",r,[i,Object(o["createVNode"])(S,{to:"/products",class:"backToShopLink btn btn-outline-primary rounded-pill mb-2 px-3 mt-4"},{default:Object(o["withCtx"])((function(){return[s,d]})),_:1})]),Object(o["createVNode"])("div",l,[Object(o["createVNode"])("table",u,[b,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(B.cart.carts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{class:"pt-1",key:e.id},[Object(o["createVNode"])("td",p,Object(o["toDisplayString"])(e.product.title),1),Object(o["createVNode"])("td",f,[Object(o["createVNode"])("p",h,Object(o["toDisplayString"])(e.product.title),1),Object(o["createVNode"])("div",j,[Object(o["createVNode"])("button",{type:"button",disabled:1===e.qty,onClick:function(t){return D.reduce(e)},class:"btn btn-primary btn-sm rounded-0"},[O],8,["disabled","onClick"]),Object(o["createVNode"])("span",m,Object(o["toDisplayString"])(e.qty),1),Object(o["createVNode"])("button",{type:"button",onClick:function(t){return D.addNum(e)},class:"btn btn-outline-primary btn-sm rounded-0"},[N],8,["onClick"])])]),Object(o["createVNode"])("td",x,"NT "+Object(o["toDisplayString"])(t.$filters.currency(e.total)),1),Object(o["createVNode"])("td",g,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return D.deleteCartProduct(e)}},[V],8,["onClick"])])])})),128))])])]),Object(o["createVNode"])("div",v,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control rounded-0","onUpdate:modelValue":e[1]||(e[1]=function(t){return B.coupon_code=t}),placeholder:"請輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"basic-addon2"},null,512),[[o["vModelText"],B.coupon_code]]),Object(o["createVNode"])("span",{class:"btn btn-outline-primary rounded-0 input-group-text",onClick:e[2]||(e[2]=function(){return D.inputCoupon&&D.inputCoupon.apply(D,arguments)})},"套用優惠券")]),Object(o["createVNode"])("div",{class:{"text-decoration-line-through":B.isTrue,"text-secondary":B.isTrue,p:B.isTrue}},[Object(o["createVNode"])("p",y,[k,Object(o["createVNode"])("span",null,"NT "+Object(o["toDisplayString"])(t.$filters.currency(B.cart.total))+"元",1)])],2),B.finalPrice===B.cart.final_total?(Object(o["openBlock"])(),Object(o["createBlock"])("p",C,[w,Object(o["createVNode"])("span",_,"NT "+Object(o["toDisplayString"])(t.$filters.currency(B.cart.final_total))+"元",1)])):Object(o["createCommentVNode"])("",!0)])],64)}c("99af");var B=c("d178"),D={components:{NavBar:B["a"]},data:function(){return{cart:[],coupon_code:"",isTrue:!1,finalPrice:""}},methods:{getCartList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart");this.$http.get(e).then((function(e){t.cart=e.data.data,console.log("購物車",e),console.log(t.cart)}))},updateCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart/").concat(t.id),o={product_id:t.product.id,qty:t.qty};this.$http.put(c,{data:o}).then((function(t){t.data.success?(console.log(t),e.getCartList()):console.log(t)})).catch((function(t){console.log(t)}))},deleteCartProduct:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart/").concat(t.id);this.$http.delete(c).then((function(t){t.data.success?(e.getCartList(),console.log(t)):console.log(t)})).catch((function(t){console.log(t)}))},addNum:function(t){t.product_id===t.product.id&&(t.qty+=1,this.updateCart(t))},reduce:function(t){t.product_id===t.product.id&&(t.qty-=1,this.updateCart(t)),console.log(t)},inputCoupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/coupon"),c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){t.getCartList(),t.finalPrice=e.data.data.final_total,t.isTrue=!t.isTrue,console.log(e),console.log(e.data.data.final_total)}))}},mounted:function(){this.getCartList()}};c("604d");D.render=T;e["default"]=D}}]);
//# sourceMappingURL=chunk-64b85af0.1eaf5699.js.map