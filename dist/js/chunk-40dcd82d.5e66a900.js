(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40dcd82d"],{"1dde":function(e,t,c){var o=c("d039"),a=c("b622"),n=c("2d00"),r=a("species");e.exports=function(e){return n>=51||!o((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},8418:function(e,t,c){"use strict";var o=c("c04e"),a=c("9bf2"),n=c("5c6c");e.exports=function(e,t,c){var r=o(t);r in e?a.f(e,r,n(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var o=c("23e7"),a=c("d039"),n=c("e8b5"),r=c("861d"),s=c("7b0b"),i=c("50c4"),l=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),f=b("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",h=p>=51||!a((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),m=u("concat"),N=function(e){if(!r(e))return!1;var t=e[f];return void 0!==t?!!t:n(e)},x=!h||!m;o({target:"Array",proto:!0,forced:x},{concat:function(e){var t,c,o,a,n,r=s(this),u=d(r,0),b=0;for(t=-1,o=arguments.length;t<o;t++)if(n=-1===t?r:arguments[t],N(n)){if(a=i(n.length),b+a>j)throw TypeError(O);for(c=0;c<a;c++,b++)c in n&&l(u,b,n[c])}else{if(b>=j)throw TypeError(O);l(u,b++,n)}return u.length=b,u}})},b513:function(e,t,c){},b789:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),a=Object(o["createVNode"])("div",{class:"banner bg-cover d-flex justify-content-center align-items-center",style:{"background-image":"url('https://images.unsplash.com/photo-1592805145006-353114433db5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=750&q=80')",height:"400px"}},[Object(o["createVNode"])("div",{class:"cart-text text-white"},[Object(o["createVNode"])("h3",{class:"pt-2"},"購物車")])],-1),n={class:"container"},r={class:"d-flex justify-content-between align-items-center"},s=Object(o["createVNode"])("h6",{class:"mb-3 mt-5"},"購物明細",-1),i=Object(o["createVNode"])("i",{class:"fas fa-caret-left"},null,-1),l=Object(o["createTextVNode"])(" 繼續選購 "),d={class:"table-responsive"},u={class:"table"},b=Object(o["createVNode"])("thead",{class:"bg-primary text-white"},[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{class:"d-none d-sm-block d-sm-table-cell ps-3",width:"300"},"商品名稱"),Object(o["createVNode"])("th",{class:"text-center",width:"300"},[Object(o["createVNode"])("span",{class:"d-inline d-sm-none ps-3"},"名稱/"),Object(o["createTextVNode"])(" 數量")]),Object(o["createVNode"])("th",{class:"text-center","max-width":"150"},"金額"),Object(o["createVNode"])("th",{class:"text-center text-sm-end pe-4"},"刪除")])],-1),p={class:"d-none d-sm-table-cell ps-3"},f={class:"mb-0 pt-2"},j={class:"ps-sm-5 align-middle d-table-cell"},O={class:"d-sm-none"},h={class:" input-group mx-auto ps-sm-4"},m=Object(o["createVNode"])("i",{class:"fas fa-minus"},null,-1),N={class:"qty_input border border-2 pt-1 text-center px-3"},x=Object(o["createVNode"])("i",{class:"fas fa-plus"},null,-1),V={class:"text-center"},g={class:"align-middle text-center text-sm-end pe-3"},y=Object(o["createVNode"])("i",{class:"far fa-trash-alt"},null,-1),v={class:"input-group mb-3"},k={class:"h5 text-end pe-5"},C=Object(o["createTextVNode"])("總計: "),_={key:0,class:"h5 text-end pe-5 text-primary"},T=Object(o["createTextVNode"])("折扣後: "),w={class:"text-primary"};function B(e,t,c,B,D,S){var q=Object(o["resolveComponent"])("NavBar"),P=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(q),a,Object(o["createVNode"])("div",n,[Object(o["createVNode"])("div",r,[s,Object(o["createVNode"])(P,{to:"/products",class:"backToShopLink btn btn-outline-primary rounded-pill mb-2 px-3 mt-4"},{default:Object(o["withCtx"])((function(){return[i,l]})),_:1})]),Object(o["createVNode"])("div",d,[Object(o["createVNode"])("table",u,[b,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(D.cart.carts,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{class:"pt-1",key:t.id},[Object(o["createVNode"])("td",p,[Object(o["createVNode"])("p",f,Object(o["toDisplayString"])(t.product.title),1),D.finalPrice===D.cart.final_total?(Object(o["openBlock"])(),Object(o["createBlock"])("p",{key:0,class:["d-none d-sm-table-cell",{"text-success":D.isTrue}]},"已套用此優惠",2)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("td",j,[Object(o["createVNode"])("p",O,Object(o["toDisplayString"])(t.product.title),1),D.finalPrice===D.cart.final_total?(Object(o["openBlock"])(),Object(o["createBlock"])("p",{key:0,class:["d-sm-none",{"text-success":D.isTrue}]},"已套用此優惠",2)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",h,[Object(o["createVNode"])("button",{type:"button",disabled:1===t.qty,onClick:function(e){return S.reduce(t)},class:"btn btn-primary btn-sm rounded-0"},[m],8,["disabled","onClick"]),Object(o["createVNode"])("span",N,Object(o["toDisplayString"])(t.qty),1),Object(o["createVNode"])("button",{type:"button",onClick:function(e){return S.addNum(t)},class:"btn btn-outline-primary btn-sm rounded-0"},[x],8,["onClick"])])]),Object(o["createVNode"])("td",V,[Object(o["createVNode"])("p",{class:["pt-2 mb-0",{"text-decoration-line-through":D.isTrue,"text-secondary":D.isTrue}]}," NT "+Object(o["toDisplayString"])(e.$filters.currency(t.total)),3),D.finalPrice===D.cart.final_total?(Object(o["openBlock"])(),Object(o["createBlock"])("span",{key:0,class:{"text-success":D.isTrue}},"NT "+Object(o["toDisplayString"])(e.$filters.currency(t.final_total)),3)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("td",g,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return S.deleteCartProduct(t)}},[y],8,["onClick"])])])})),128))])])]),Object(o["createVNode"])("div",v,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control rounded-0","onUpdate:modelValue":t[1]||(t[1]=function(e){return D.coupon_code=e}),placeholder:"請輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"basic-addon2"},null,512),[[o["vModelText"],D.coupon_code]]),Object(o["createVNode"])("span",{class:"btn btn-outline-primary rounded-0 input-group-text",onClick:t[2]||(t[2]=function(){return S.inputCoupon&&S.inputCoupon.apply(S,arguments)})},"套用優惠券")]),Object(o["createVNode"])("div",{class:{"text-decoration-line-through":D.isTrue,"text-secondary":D.isTrue,p:D.isTrue}},[Object(o["createVNode"])("p",k,[C,Object(o["createVNode"])("span",null,"NT "+Object(o["toDisplayString"])(e.$filters.currency(D.cart.total))+"元",1)])],2),D.finalPrice===D.cart.final_total?(Object(o["openBlock"])(),Object(o["createBlock"])("p",_,[T,Object(o["createVNode"])("span",w,"NT "+Object(o["toDisplayString"])(e.$filters.currency(D.cart.final_total))+"元",1)])):Object(o["createCommentVNode"])("",!0)])],64)}c("99af");var D=c("d178"),S={components:{NavBar:D["a"]},data:function(){return{cart:[],coupon_code:"",isTrue:!1,finalPrice:""}},methods:{getCartList:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart");this.$http.get(t).then((function(t){e.cart=t.data.data,console.log("購物車",t),console.log(e.cart)}))},updateCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart/").concat(e.id),o={product_id:e.product.id,qty:e.qty};this.$http.put(c,{data:o}).then((function(e){e.data.success?(console.log(e),t.getCartList()):console.log(e)})).catch((function(e){console.log(e)}))},deleteCartProduct:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/cart/").concat(e.id);this.$http.delete(c).then((function(e){e.data.success?(t.getCartList(),console.log(e)):console.log(e)})).catch((function(e){console.log(e)}))},addNum:function(e){e.product_id===e.product.id&&(e.qty+=1,this.updateCart(e))},reduce:function(e){e.product_id===e.product.id&&(e.qty-=1,this.updateCart(e)),console.log(e)},inputCoupon:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/coupon"),c={code:this.coupon_code};this.$http.post(t,{data:c}).then((function(t){t.data.success?(e.getCartList(),e.finalPrice=t.data.data.final_total,e.isTrue=!e.isTrue,console.log(t),console.log(t.data.data.final_total)):console.log("請確認輸入的代碼")})).catch((function(e){void 0===e.data&&console.log("找不到優惠代碼")}))}},mounted:function(){this.getCartList()}};c("ecbb");S.render=B;t["default"]=S},ecbb:function(e,t,c){"use strict";c("b513")}}]);
//# sourceMappingURL=chunk-40dcd82d.5e66a900.js.map