(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39eba18c"],{"002e":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),r=Object(a["createVNode"])("div",{class:"loadingio-spinner-dual-ring-7s087i3q3b3"},[Object(a["createVNode"])("div",{class:"ldio-us6frdv3wm"},[Object(a["createVNode"])("div"),Object(a["createVNode"])("div",null,[Object(a["createVNode"])("div")])])],-1),o={class:"container"},l={class:"row"},n={class:"col-md-9 ms-sm-auto col-lg-10 px-md-4"},d={class:"table mt-4 table-hover table-responsive"},i=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"購買時間"),Object(a["createVNode"])("th",{width:"200"},"Email"),Object(a["createVNode"])("th",{width:"300"},"購買款項"),Object(a["createVNode"])("th",{class:"text-center"},"應付金額"),Object(a["createVNode"])("th",null,"是否付款"),Object(a["createVNode"])("th",{class:"text-center"},"編輯")])],-1),s={class:"list-unstyled"},b={class:"text-center"},O={class:"form-check form-switch"},u={key:0},p={key:1},j={class:"btn-group"},h={class:"d-flex justify-content-center"};function V(e,t,c,V,m,N){var g=Object(a["resolveComponent"])("Loading"),f=Object(a["resolveComponent"])("ordersModal"),k=Object(a["resolveComponent"])("deleteOrderModal"),v=Object(a["resolveComponent"])("pagination");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(g,{active:m.isLoading},{default:Object(a["withCtx"])((function(){return[r]})),_:1},8,["active"]),Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("main",n,[Object(a["createVNode"])(f,{ref:"ordersModal","order-detail":m.tempOrder,onUpdate:N.updateOrder},null,8,["order-detail","onUpdate"]),Object(a["createVNode"])(k,{ref:"deleteOrdersModal",delProduct:m.tempOrder,onCheckDelete:N.deleteOrder},null,8,["delProduct","onCheckDelete"]),Object(a["createVNode"])("table",d,[i,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(m.allOrders,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(a["createVNode"])("td",null,[t.user?(Object(a["openBlock"])(),Object(a["createBlock"])("span",{key:0,textContent:Object(a["toDisplayString"])(t.user.email)},null,8,["textContent"])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("ul",s,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.products,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t},Object(a["toDisplayString"])(e.product.title)+" 數量："+Object(a["toDisplayString"])(e.qty)+" "+Object(a["toDisplayString"])(e.product.unit),1)})),128))])]),Object(a["createVNode"])("td",b,Object(a["toDisplayString"])(e.$filters.currency(t.total)),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",O,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return N.updateOrder(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["vModelCheckbox"],t.is_paid]]),Object(a["createVNode"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",u,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",p,"未付款"))],8,["for"])])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",j,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return N.openOrderModal("edit",t)}},"檢視",8,["onClick"]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return N.openOrderModal("delete",t)}},"刪除",8,["onClick"])])])])})),128))])]),Object(a["createVNode"])("div",h,[Object(a["createVNode"])(v,{pages:m.pagination,onChangePage:N.getOrders},null,8,["pages","onChangePage"])])])])])],64)}var m=c("5530"),N=(c("99af"),c("1799")),g=(c("b0c0"),{class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}),f={class:"modal-dialog modal-xl"},k={class:"modal-content"},v=Object(a["createVNode"])("div",{class:"modal-header"},[Object(a["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},"訂單資料"),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),y={class:"modal-body"},B={class:"row"},x={class:"col-4"},D=Object(a["createVNode"])("h4",null,"用戶資料",-1),C={class:"table"},w={key:0},M=Object(a["createVNode"])("th",null,"姓名",-1),_=Object(a["createVNode"])("th",null,"Email",-1),S=Object(a["createVNode"])("th",null,"電話",-1),L=Object(a["createVNode"])("th",null,"地址",-1),$={class:"col-8"},P=Object(a["createVNode"])("h4",null,"訂單明細",-1),F={class:"table"},U=Object(a["createVNode"])("th",null,"訂單編號",-1),q=Object(a["createVNode"])("th",null,"下單時間",-1),E=Object(a["createVNode"])("th",null,"付款時間",-1),J=Object(a["createVNode"])("th",null,"付款狀態",-1),T={key:0,class:"text-success"},z={key:1,class:"text-muted"},A=Object(a["createVNode"])("th",null,"總金額",-1),G=Object(a["createVNode"])("h4",null,"選購商品",-1),H={class:"table"},I={class:"text-end"},K={class:"d-flex justify-content-end"},Q={class:"form-check"},R={class:"form-check-label",for:"flexCheckDefault"},W={key:0},X={key:1},Y={class:"modal-footer"},Z=Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function ee(e,t,c,r,o,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",g,[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("div",k,[v,Object(a["createVNode"])("div",y,[Object(a["createVNode"])("div",B,[Object(a["createVNode"])("div",x,[D,Object(a["createVNode"])("table",C,[o.tempOrder.user?(Object(a["openBlock"])(),Object(a["createBlock"])("tbody",w,[Object(a["createVNode"])("tr",null,[M,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.name),1)]),Object(a["createVNode"])("tr",null,[_,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.email),1)]),Object(a["createVNode"])("tr",null,[S,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.tel),1)]),Object(a["createVNode"])("tr",null,[L,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.user.address),1)])])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",$,[P,Object(a["createVNode"])("table",F,[Object(a["createVNode"])("tbody",null,[Object(a["createVNode"])("tr",null,[U,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(o.tempOrder.id),1)]),Object(a["createVNode"])("tr",null,[q,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(o.tempOrder.create_at)),1)]),Object(a["createVNode"])("tr",null,[E,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(o.tempOrder.paid_date)),1)]),Object(a["createVNode"])("tr",null,[J,Object(a["createVNode"])("td",null,[o.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("strong",T," 付款成功 ")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",z,"尚未付款"))])]),Object(a["createVNode"])("tr",null,[A,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.currency(o.tempOrder.total)),1)])])]),G,Object(a["createVNode"])("table",H,[Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(o.tempOrder.products,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("th",null,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(t.qty)+" / "+Object(a["toDisplayString"])(t.product.unit),1),Object(a["createVNode"])("td",I,Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)])})),128))])]),Object(a["createVNode"])("div",K,[Object(a["createVNode"])("div",Q,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.tempOrder.is_paid=e})},null,512),[[a["vModelCheckbox"],o.tempOrder.is_paid]]),Object(a["createVNode"])("label",R,[o.tempOrder.is_paid?(Object(a["openBlock"])(),Object(a["createBlock"])("span",W,"已付款")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",X,"未付款"))])])])])])]),Object(a["createVNode"])("div",Y,[Z,Object(a["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(e){return l.update(o.tempOrder)})},"修改付款狀態")])])])],512)}var te=c("e0ae"),ce={props:["orderDetail"],mixins:[te["a"]],watch:{orderDetail:function(){this.tempOrder=this.orderDetail}},data:function(){return{tempOrder:{}}},methods:{update:function(e){this.$emit("update",e)}}};ce.render=ee;var ae=ce,re=c("e1a2"),oe={components:{pagination:N["a"],ordersModal:ae,deleteOrderModal:re["a"]},data:function(){return{allOrders:{},tempOrder:{},pagination:{},isLoading:!1}},methods:{getOrders:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/admin/orders?page=:page");this.$http.get(t).then((function(t){t.data.success&&(e.isLoading=!1,e.allOrders=t.data.orders,e.pagination=t.data.pagination,console.log(t))}))},updateOrder:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/admin/order/").concat(e.id);this.$http.put(c,{data:e}).then((function(e){e.data.success&&(t.isLoading=!1,t.$refs.ordersModal.hideModal(),t.getOrders(),console.log(e))}))},deleteOrder:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("iven_vue3_course","/admin/order/").concat(this.tempOrder.id);this.$http.delete(c).then((function(e){t.isLoading=!1,t.$refs.deleteOrdersModal.hideModal(),t.getOrders(),console.log(e)}))},openOrderModal:function(e,t){switch(e){case"edit":this.tempOrder=Object(m["a"])({},t),console.log(this.tempOrder),this.$refs.ordersModal.showModal();break;case"delete":this.tempOrder=Object(m["a"])({},t),console.log(this.tempOrder),this.$refs.deleteOrdersModal.showModal()}}},mounted:function(){this.getOrders()}};oe.render=V;t["default"]=oe},1799:function(e,t,c){"use strict";var a=c("7a23"),r={"aria-label":"Page navigation example"},o={class:"pagination"},l=Object(a["createVNode"])("span",{"aria-hidden":"true"},"«",-1),n=Object(a["createVNode"])("span",{"aria-hidden":"true"},"»",-1);function d(e,t,c,d,i,s){return Object(a["openBlock"])(),Object(a["createBlock"])("nav",r,[Object(a["createVNode"])("ul",o,[Object(a["createVNode"])("li",{class:["page-item",{disabled:1===c.pages.current_page}]},[Object(a["createVNode"])("a",{class:"page-link ",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(e){return s.change(c.pages.current_page-1)}),["prevent"]))},[l])],2),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(c.pages.total_pages,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:["page-item ",{active:c.pages.current_page===e}],key:t},[Object(a["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(a["withModifiers"])((function(t){return s.change(e)}),["prevent"])},Object(a["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(a["createVNode"])("li",{class:["page-item",{disabled:c.pages.current_page===c.pages.total_pages}]},[Object(a["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(a["withModifiers"])((function(e){return s.change(c.pages.current_page+1)}),["prevent"]))},[n])],2)])])}var i={props:["pages"],methods:{change:function(e){this.$emit("change-page",e)}}};i.render=d;t["a"]=i},b0c0:function(e,t,c){var a=c("83ab"),r=c("9bf2").f,o=Function.prototype,l=o.toString,n=/^\s*function ([^ (]*)/,d="name";a&&!(d in o)&&r(o,d,{configurable:!0,get:function(){try{return l.call(this).match(n)[1]}catch(e){return""}}})},e1a2:function(e,t,c){"use strict";var a=c("7a23"),r={class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},o={class:"modal-dialog"},l={class:"modal-content"},n=Object(a["createVNode"])("div",{class:"modal-header bg-danger"},[Object(a["createVNode"])("h5",{class:"modal-title text-white"},"刪除商品"),Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),d={class:"modal-body"},i=Object(a["createTextVNode"])("確定要刪除"),s={class:"text-danger fw-bold"},b=Object(a["createTextVNode"])("嗎？刪除後，無法復原喔！"),O={class:"modal-footer"},u=Object(a["createVNode"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function p(e,t,c,p,j,h){return Object(a["openBlock"])(),Object(a["createBlock"])("div",r,[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",l,[n,Object(a["createVNode"])("div",d,[Object(a["createVNode"])("p",null,[i,Object(a["createVNode"])("span",s,Object(a["toDisplayString"])(c.delProduct.title),1),b])]),Object(a["createVNode"])("div",O,[u,Object(a["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(){return h.checkDelete&&h.checkDelete.apply(h,arguments)})},"確定刪除")])])])],512)}var j=c("e0ae"),h={mixins:[j["a"]],props:["delProduct"],data:function(){return{}},methods:{checkDelete:function(){this.$emit("checkDelete")}},mounted:function(){}};h.render=p;t["a"]=h}}]);
//# sourceMappingURL=chunk-39eba18c.4995df0e.js.map